"use strict";(self["webpackChunkaurora_blog"]=self["webpackChunkaurora_blog"]||[]).push([[743],{5358:function(e,t,a){a.r(t),a.d(t,{default:function(){return Ce}});var l=a(3396),i=a(7139),r=a(9242);const s=e=>((0,l.dD)("data-v-74d42c6a"),e=e(),(0,l.Cn)(),e),c={class:"flex flex-col"},n={class:"main-grid"},o={class:"post-header"},d={class:"post-labels"},p={key:1},m={key:2},u={key:1},g=s((()=>(0,l._)("b",{class:"opacity-50"},"#",-1))),h={key:0,class:"post-title text-white"},w={class:"flex flex-row items-center justify-start mt-8 mb-4"},f={key:0,class:"post-footer"},C={class:"text-white opacity-80"},y={class:"opacity-70"},v={key:1,class:"post-footer"},x={class:"flex flex-row items-center"},k={class:"text-ob-dim mt-1"},b={key:2,class:"post-stats"},_={class:"pl-2 opacity-70"},W={class:"pl-2 opacity-70"},D={key:3,class:"post-stats"},A={class:"pl-2"},T={class:"pl-2"},z={class:"main-grid"},M={class:"post-html"},I=["innerHTML"],N=(0,l.Uk)(" 打赏 "),Z={class:"my-header"},R=(0,l.Uk)(" 关闭 "),S=["src"],F=["src"],H=["src"],j=["src"],E={key:1,class:"bg-ob-deep-800 px-14 py-16 rounded-2xl shadow-xl block min-h-screen"},P=s((()=>(0,l._)("br",null,null,-1))),B=s((()=>(0,l._)("br",null,null,-1))),Q=s((()=>(0,l._)("br",null,null,-1))),q={class:"flex flex-col lg:flex-row justify-start items-end my-8 my-gap"},L={key:0,class:"w-full h-full self-stretch mr-0 lg:mr-4"},J={key:1,class:"w-full h-full self-stretch mt-0"},U={id:"sticky-sidebar"},Y={class:"sidebar-box mb-4"},V=s((()=>(0,l._)("div",{id:"toc1"},null,-1)));function $(e,t,a,s,$,O){const X=(0,l.up)("ob-skeleton"),K=(0,l.up)("svg-icon"),G=(0,l.up)("el-button"),ee=(0,l.up)("CircleCloseFilled"),te=(0,l.up)("el-icon"),ae=(0,l.up)("el-dialog"),le=(0,l.up)("SubTitle"),ie=(0,l.up)("ArticleCard"),re=(0,l.up)("Comment"),se=(0,l.up)("Profile"),ce=(0,l.up)("Navigator"),ne=(0,l.up)("Sticky"),oe=(0,l.up)("Sidebar"),de=(0,l.Q2)("lazy");return(0,l.wg)(),(0,l.iD)("div",c,[(0,l._)("div",n,[(0,l._)("div",o,[(0,l._)("span",d,[e.loading?((0,l.wg)(),(0,l.j4)(X,{key:0,tag:"b",height:"20px",width:"35px"})):!e.loading&&e.article.categoryName?((0,l.wg)(),(0,l.iD)("b",p,[(0,l._)("span",null,(0,i.zw)(e.article.categoryName),1)])):((0,l.wg)(),(0,l.iD)("b",m,(0,i.zw)(e.t("settings.default-category")),1)),(0,l._)("ul",null,[e.loading?((0,l.wg)(),(0,l.j4)(X,{key:0,count:2,tag:"li",height:"16px",width:"35px",class:"mr-2"})):((0,l.wg)(),(0,l.iD)("li",u,[g,(0,l.Uk)(" "+(0,i.zw)(e.t("settings.default-tag")),1)]))])]),e.article.articleTitle?((0,l.wg)(),(0,l.iD)("h1",h,(0,i.zw)(e.article.articleTitle),1)):((0,l.wg)(),(0,l.j4)(X,{key:1,class:"post-title text-white uppercase",width:"100%",height:"clamp(1.2rem, calc(1rem + 3.5vw), 4rem)"})),(0,l._)("div",w,[e.article.author?((0,l.wg)(),(0,l.iD)("div",f,[(0,l.wy)((0,l._)("img",{class:"hover:opacity-50 cursor-pointer",alt:"author avatar",onClick:t[0]||(t[0]=t=>e.handleAuthorClick(e.article.author.website))},null,512),[[de,e.article.author.avatar||""]]),(0,l._)("span",C,[(0,l._)("strong",{class:"text-white pr-1.5 hover:opacity-50 cursor-pointer",onClick:t[1]||(t[1]=t=>e.handleAuthorClick(e.article.author.website))},(0,i.zw)(e.article.author.nickname),1),(0,l._)("span",y,(0,i.zw)(e.t("settings.shared-on"))+" "+(0,i.zw)(e.t(`settings.months[${new Date(e.article.createTime).getMonth()}]`))+" "+(0,i.zw)(new Date(e.article.createTime).getDate())+", "+(0,i.zw)(new Date(e.article.createTime).getFullYear()),1)])])):((0,l.wg)(),(0,l.iD)("div",v,[(0,l._)("div",x,[(0,l.Wm)(X,{class:"mr-2",height:"28px",width:"28px",circle:!0}),(0,l._)("span",k,[(0,l.Wm)(X,{height:"20px",width:"150px"})])])])),""!==e.wordNum&&""!==e.readTime?((0,l.wg)(),(0,l.iD)("div",b,[(0,l._)("span",null,[(0,l.Wm)(K,{"icon-class":"text-outline",style:{stroke:"white"}}),(0,l._)("span",_,(0,i.zw)(e.wordNum),1)]),(0,l._)("span",null,[(0,l.Wm)(K,{"icon-class":"clock-outline",style:{stroke:"white"}}),(0,l._)("span",W,(0,i.zw)(e.readTime),1)])])):((0,l.wg)(),(0,l.iD)("div",D,[(0,l._)("span",null,[(0,l.Wm)(K,{"icon-class":"clock"}),(0,l._)("span",A,[(0,l.Wm)(X,{width:"40px",height:"16px"})])]),(0,l._)("span",null,[(0,l.Wm)(K,{"icon-class":"text"}),(0,l._)("span",T,[(0,l.Wm)(X,{width:"40px",height:"16px"})])])]))])])]),(0,l._)("div",z,[(0,l._)("div",null,[e.article.articleContent?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l._)("div",M,[(0,l._)("div",{class:"markdown-body",ref:"articleRef",innerHTML:e.article.articleContent},null,8,I)]),(0,l.Wm)(G,{onClick:t[2]||(t[2]=t=>e.visible=!0),class:"reward"},{default:(0,l.w5)((()=>[N])),_:1}),(0,l.Wm)(ae,{modelValue:e.visible,"onUpdate:modelValue":t[3]||(t[3]=t=>e.visible=t),"show-close":!1},{header:(0,l.w5)((({close:e})=>[(0,l._)("div",Z,[(0,l.Wm)(G,{type:"danger",onClick:e},{default:(0,l.w5)((()=>[(0,l.Wm)(te,{class:"el-icon--left"},{default:(0,l.w5)((()=>[(0,l.Wm)(ee)])),_:1}),R])),_:2},1032,["onClick"])])])),default:(0,l.w5)((()=>[e.websiteConfig.weiXinQRCode?((0,l.wg)(),(0,l.iD)("img",{key:0,src:e.websiteConfig.weiXinQRCode},null,8,S)):((0,l.wg)(),(0,l.iD)("img",{key:1,src:e.default},null,8,F)),e.websiteConfig.alipayQRCode?((0,l.wg)(),(0,l.iD)("img",{key:2,src:e.websiteConfig.alipayQRCode},null,8,H)):((0,l.wg)(),(0,l.iD)("img",{key:3,src:e.default},null,8,j))])),_:1},8,["modelValue"])],64)):((0,l.wg)(),(0,l.iD)("div",E,[(0,l.Wm)(X,{tag:"div",count:1,height:"36px",width:"150px",class:"mb-6"}),P,(0,l.Wm)(X,{tag:"div",count:35,height:"16px",width:"100px",class:"mr-2"}),B,Q,(0,l.Wm)(X,{tag:"div",count:25,height:"16px",width:"100px",class:"mr-2"})])),(0,l._)("div",q,[e.preArticleCard?((0,l.wg)(),(0,l.iD)("div",L,[(0,l.Wm)(le,{title:"settings.paginator.pre",icon:"arrow-left-circle"}),(0,l.Wm)(ie,{class:"pre-and-next-article",data:e.preArticleCard},null,8,["data"])])):(0,l.kq)("",!0),e.nextArticleCard?((0,l.wg)(),(0,l.iD)("div",J,[(0,l.Wm)(le,{title:"settings.paginator.next",side:e.isMobile?"left":"right",icon:"arrow-right-circle"},null,8,["side"]),(0,l.Wm)(ie,{class:"pre-and-next-article",data:e.nextArticleCard},null,8,["data"])])):(0,l.kq)("",!0)]),(0,l.Wm)(re)]),(0,l._)("div",null,[(0,l.Wm)(oe,null,{default:(0,l.w5)((()=>[(0,l.Wm)(se),(0,l.Wm)(ne,{stickyTop:32,endingElId:"footer",dynamicElClass:"#sticky-sidebar"},{default:(0,l.w5)((()=>[(0,l._)("div",U,[(0,l.Wm)(r.uT,{name:"fade-slide-y",mode:"out-in"},{default:(0,l.w5)((()=>[(0,l._)("div",Y,[(0,l.Wm)(le,{title:"titles.toc",icon:"toc"},null,8,["title"]),V])])),_:1}),(0,l.Wm)(ce)])])),_:1})])),_:1})])])])}var O=a(1248),X=a(4870),K=a(2483),G=a(5213),ee=a(7619),te=a(6829),ae=a(9986),le=a(3207),ie=a(5466),re=a(7437),se=a(2171),ce=a(2549),ne=a.n(ce),oe=(a(9525),a(3731),a(7372),a(1678),a(3275),a(8781),a(1973),a(1739),a(714),a(8072),a(9688),a(4121),a(77),a(3456),a(3774)),de=a.n(oe),pe=a(3184),me=a(6883),ue=a(3286),ge=a(9085),he=(0,l.aZ)({name:"Article",components:{Sidebar:O.YE,Comment:te.s,SubTitle:ae.D,ArticleCard:le.T,Profile:O.NZ,Sticky:se.Z,Navigator:O.C3},setup(){const e=(0,l.FN)()?.appContext.config.globalProperties,t=(0,ee.q)(),a=(0,ie.E)(),i=(0,re.j)(),r=(0,K.yj)(),s=(0,K.tv)(),{t:c}=(0,G.QT)(),n=(0,X.iH)(!0),o=(0,X.iH)(),d=(0,X.iH)(!1),p=(0,X.qj)({articleId:"",article:"",wordNum:"",readTime:"",comments:[],images:[],preArticleCard:"",nextArticleCard:"",haveMore:!1,isReload:!1}),m=(0,X.qj)({current:1,size:7});i.type=1,(0,l.bv)((()=>{p.articleId=r.params.articleId,y(),h(),w()})),(0,l.Ah)((()=>{a.resetHeaderImage(),p.article="",de().destroy()})),(0,K.ao)((e=>{p.article="",p.readTime="",p.wordNum="",p.comments=[],p.images=[],p.preArticleCard="",p.nextArticleCard="",p.articleId=e.params.articleId,m.current=1,p.isReload=!0,y(),h(),w()})),(0,l.JJ)("comments",(0,l.Fl)((()=>p.comments))),(0,l.JJ)("haveMore",(0,l.Fl)((()=>p.haveMore))),pe.Z.on("articleFetchComment",(()=>{m.current=1,p.isReload=!0,w()})),pe.Z.on("articleFetchReplies",(e=>{f(e)})),pe.Z.on("articleLoadMore",(()=>{w()}));const u=e=>{(0,me.e)({images:p.images,index:p.images.indexOf(e)})},g=()=>{let e=o.value.children;if(e.length)for(let l=0;l<e.length;l++){let t=e[l],a=/^H[1-4]{1}$/;a.exec(t.tagName)&&(t.id=l)}de().init({tocSelector:"#toc1",contentSelector:".post-html",headingSelector:"h1, h2, h3",onClick:function(e){e.preventDefault()}});const t=o.value.getElementsByTagName("img");for(var a=0;a<t.length;a++)p.images.push(t[a].src),t[a].addEventListener("click",(function(e){u(e.target.currentSrc)}))},h=()=>{n.value=!0,ue.Z.getArticeById(p.articleId).then((({data:t})=>{if(52003===t.code)return e.$notify({title:"Error",message:"文章密码认证未通过",type:"error"}),void s.push({path:"/出错啦"});null!==t.data?(a.setHeaderImage(t.data.articleCover),new Promise((e=>{t.data.articleContent=(0,ge.Z)(t.data.articleContent),e(t.data)})).then((e=>{p.article=e,p.wordNum=Math.round(v(e.articleContent).length/100)/10+"k",p.readTime=Math.round(v(e.articleContent).length/400)+"mins",n.value=!1,(0,l.Y3)((()=>{ne().highlightAll(),g()}))})),new Promise((e=>{t.data.preArticleCard.articleContent=(0,ge.Z)(t.data.preArticleCard.articleContent).replace(/<\/?[^>]*>/g,"").replace(/[|]*\n/,"").replace(/&npsp;/gi,""),e(t.data.preArticleCard)})).then((e=>{p.preArticleCard=e})),new Promise((e=>{t.data.nextArticleCard.articleContent=(0,ge.Z)(t.data.nextArticleCard.articleContent).replace(/<\/?[^>]*>/g,"").replace(/[|]*\n/,"").replace(/&npsp;/gi,""),e(t.data.nextArticleCard)})).then((e=>{p.nextArticleCard=e}))):s.push({path:"/出错啦"})}))},w=()=>{const e={type:1,topicId:p.articleId,current:m.current,size:m.size};ue.Z.getComments(e).then((({data:e})=>{p.isReload?(p.comments=e.data.records,p.isReload=!1):p.comments.push(...e.data.records),e.data.count<=p.comments.length?p.haveMore=!1:p.haveMore=!0,m.current++}))},f=e=>{ue.Z.getRepliesByCommentId(p.comments[e].id).then((({data:t})=>{p.comments[e].replyDTOs=t.data}))},C=e=>{""===e&&(e=window.location.href),window.location.href=e},y=()=>{window.scrollTo({top:0})},v=e=>e.replace(/<\/?[^>]*>/g,"").replace(/[|]*\n/,"").replace(/&npsp;/gi,"");return{articleRef:o,visible:d,...(0,X.BK)(p),isMobile:(0,l.Fl)((()=>a.isMobile)),websiteConfig:(0,l.Fl)((()=>t.websiteConfig)),default:"https://static.wusuowei.online/img/SB9P0M%606L%7EF%29%28%7BZC2H_D5%60N.png",handleAuthorClick:C,loading:n,t:c}}}),we=a(89);const fe=(0,we.Z)(he,[["render",$],["__scopeId","data-v-74d42c6a"]]);var Ce=fe}}]);