"use strict";(self["webpackChunkaurora_blog"]=self["webpackChunkaurora_blog"]||[]).push([[829],{6829:function(e,t,n){n.d(t,{s:function(){return we}});var a=n(3396);const o={class:"bg-ob-deep-800 p-4 mt-8 lg:px-14 lg:py-10 rounded-2xl shadow-xl mb-8 lg:mb-0",id:"comments"};function l(e,t,n,l,s,r){const i=(0,a.up)("SubTitle"),m=(0,a.up)("CommentForm"),c=(0,a.up)("CommentList");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a.Wm)(i,{title:"titles.comment"},null,8,["title"]),(0,a.Wm)(m),(0,a.Wm)(c)])}var s=n(9986),r=n(9242);const i=e=>((0,a.dD)("data-v-37c40725"),e=e(),(0,a.Cn)(),e),m={class:"flex space-x-3 xl:space-x-5"},c={class:"comment flex flex-col flex-wrap-reverse w-full max-w-full-calc"},p={class:"justify-between",style:{"text-align":"right"}},u=i((()=>(0,a._)("span",{class:"text-center flex-grow commit"},"Add Comment",-1))),d=[u],y=i((()=>(0,a._)("span",{class:"text-center flex-grow commit"},"Ask GPT",-1))),g=[y],f=i((()=>(0,a._)("div",{class:"w-full border-b-2 mt-6 wire"},null,-1)));function w(e,t,n,o,l,s){const i=(0,a.up)("Avatar");return(0,a.wg)(),(0,a.iD)("div",m,[(0,a.Wm)(i,{url:e.avatar},null,8,["url"]),(0,a._)("div",c,[(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.commentContent=t),class:"w-full shadow-md rounded-md p-4 focus:outline-none input",placeholder:"Add comment...",cols:"30",rows:"5"},null,512),[[r.nr,e.commentContent]]),(0,a._)("div",p,[(0,a._)("button",{onClick:t[1]||(t[1]=t=>e.saveComment(1)),id:"submit-button",class:"mt-5 w-32 text-white p-2 rounded-lg shadow-lg transition transform hover:scale-105 float-right"},d),(0,a._)("button",{onClick:t[2]||(t[2]=t=>e.saveComment(2)),id:"submit-button",class:"mt-5 w-32 text-white p-2 rounded-lg shadow-lg transition transform hover:scale-105 float-left"},g)]),f])])}var h=n(4870),v=n(3830),C=n(3560),x=n(2483),b=n(7437),_=n(7619),k=n(3286),Z=n(3184),I=(0,a.aZ)({name:"CommentItem",components:{SubTitle:s.D,Avatar:v.Z},setup(){const e=(0,a.FN)()?.appContext.config.globalProperties,t=(0,C.L)(),n=(0,b.j)(),o=(0,_.q)(),l=(0,x.yj)(),s=(0,h.qj)({commentContent:""}),r=a=>{if(""===t.userInfo)return void e.$notify({title:"Warning",message:"请登录后评论",type:"warning"});if(""==s.commentContent.trim())return void e.$notify({title:"Warning",message:"评论不能为空",type:"warning"});const r=l.path,m=r.split("/"),c={commentContent:s.commentContent,type:n.type};c.topicId=m[2],1===a?k.Z.saveComment(c).then((({data:t})=>{if(t.flag){i();let t=o.websiteConfig.isCommentReview;t?e.$notify({title:"Warning",message:"评论成功,正在审核中",type:"warning"}):e.$notify({title:"Success",message:"评论成功",type:"success"}),s.commentContent=""}else e.$notify({title:"Error",message:t.message,type:"error"})})):2===a&&k.Z.saveCommentGPT(c).then((({data:t})=>{if(t.flag){i();let t=o.websiteConfig.isCommentReview;t?e.$notify({title:"Warning",message:"评论成功,正在审核中",type:"warning"}):e.$notify({title:"Success",message:"评论成功",type:"success"}),s.commentContent=""}else e.$notify({title:"Error",message:t.message,type:"error"})}))},i=()=>{switch(n.type){case 1:Z.Z.emit("articleFetchComment");break;case 2:Z.Z.emit("messageFetchComment");break;case 3:Z.Z.emit("aboutFetchComment");break;case 4:Z.Z.emit("friendLinkFetchComment");break;case 5:Z.Z.emit("talkFetchComment")}};return{...(0,h.BK)(s),avatar:(0,a.Fl)((()=>t.userInfo.avatar)),saveComment:r}}}),R=n(89);const F=(0,R.Z)(I,[["render",w],["__scopeId","data-v-37c40725"]]);var D=F;const W={key:0,class:"load-more-button mt-7 w-32 text-white p-2 rounded-lg shadow-lg transition transform hover:scale-105 flex mx-auto"};function S(e,t,n,o,l,s){const i=(0,a.up)("CommentItem");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(r.W3,{name:"fade"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.comments,((e,t)=>((0,a.wg)(),(0,a.j4)(i,{key:e.id,comment:e,index:t},null,8,["comment","index"])))),128))])),_:1}),e.haveMore?((0,a.wg)(),(0,a.iD)("button",W,[(0,a._)("span",{class:"text-center flex-grow",onClick:t[0]||(t[0]=(...t)=>e.loadMore&&e.loadMore(...t))},"Load More")])):(0,a.kq)("",!0)],64)}var M=n(7139);const L={class:"mt-5 max-w-full"},j={class:"flex space-x-3 xl:space-x-5"},A={class:"max-w-full-calc space-y-5"},$={class:"bg-white text-primary p-4 rounded-md relative shadow-md reply",style:{width:"fit-content"}},U=["innerHTML"],T={class:"flex justify-between mt-3 text-xs text-gray-400 space-x-3 md:space-x-16"};function q(e,t,n,o,l,s){const i=(0,a.up)("Avatar"),m=(0,a.up)("CommentReplyForm"),c=(0,a.up)("CommentReplyItem");return(0,a.wg)(),(0,a.iD)("div",L,[(0,a._)("div",j,[(0,a.Wm)(i,{url:e.comment.avatar},null,8,["url"]),(0,a._)("div",A,[(0,a._)("div",$,[(0,a._)("p",{class:"commentContent",innerHTML:e.comment.commentContent.replaceAll("\n","<br>")},null,8,U),(0,a._)("div",T,[(0,a._)("span",null,(0,M.zw)(e.comment.nickname)+" | "+(0,M.zw)(e.time),1),(0,a._)("div",null,[(0,a._)("span",{onClick:t[0]||(t[0]=(...t)=>e.clickOnReply&&e.clickOnReply(...t)),class:"cursor-pointer reply-button"},"Reply")])])]),(0,a.wy)((0,a.Wm)(m,{replyUserId:e.comment.userId,initialContent:e.replyContent,onChangeShow:e.changeShow},null,8,["replyUserId","initialContent","onChangeShow"]),[[r.F8,e.show]]),(0,a.Wm)(r.W3,{name:"fade"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.comment.replyDTOs,(t=>((0,a.wg)(),(0,a.j4)(c,{key:t.id,reply:t,commentUserId:e.comment.userId},null,8,["reply","commentUserId"])))),128))])),_:1})])])])}const B=e=>((0,a.dD)("data-v-b2a0afe8"),e=e(),(0,a.Cn)(),e),H={class:"flex space-x-3 xl:space-x-5"},K={class:"reply bg-white flex flex-col p-3 rounded-md relative shadow-md"},O=["innerHTML"],E={class:"flex justify-between mt-2 text-xs text-gray-400 space-x-3 md:space-x-16"},Y=B((()=>(0,a._)("a",{href:"",target:"_blank"},null,-1)));function z(e,t,n,o,l,s){const i=(0,a.up)("Avatar"),m=(0,a.up)("CommentReplyForm");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",H,[(0,a.Wm)(i,{url:e.reply.avatar},null,8,["url"]),(0,a._)("div",K,[(0,a._)("p",{class:"commentContent",innerHTML:e.commentContent.replaceAll("\n","<br>")},null,8,O),(0,a._)("div",E,[(0,a._)("span",null,(0,M.zw)(e.reply.nickname)+" | "+(0,M.zw)(e.time),1),(0,a._)("div",null,[(0,a._)("span",{onClick:t[0]||(t[0]=(...t)=>e.clickOnSonReply&&e.clickOnSonReply(...t)),class:"cursor-pointer reply-button"},"Reply")])])])]),Y,(0,a.wy)((0,a.Wm)(m,{class:"mt-5",replyUserId:e.reply.userId,initialContent:e.replyContent,onChangeShow:e.changeShow},null,8,["replyUserId","initialContent","onChangeShow"]),[[r.F8,e.show]])])}const J=e=>((0,a.dD)("data-v-592289ee"),e=e(),(0,a.Cn)(),e),P={class:"flex space-x-3 xl:space-x-5"},N={class:"reply flex flex-col flex-wrap-reverse w-full max-w-full-calc",style:{width:"fit-content"}},G=["placeholder"],V={class:"justify-between",style:{"text-align":"right"}},Q=J((()=>(0,a._)("span",{class:"text-center flex-grow commit"},"Reply",-1))),X=[Q],ee=J((()=>(0,a._)("span",{class:"text-center flex-grow commit"},"Cancel",-1))),te=[ee];function ne(e,t,n,o,l,s){const i=(0,a.up)("Avatar");return(0,a.wg)(),(0,a.iD)("div",P,[(0,a.Wm)(i,{url:e.avatar},null,8,["url"]),(0,a._)("div",N,[(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.commentContent=t),class:"w-full shadow-md rounded-md p-4 focus:outline-none input",placeholder:e.initialContent,cols:"30",rows:"5"},null,8,G),[[r.nr,e.commentContent]]),(0,a._)("div",V,[(0,a._)("button",{onClick:t[1]||(t[1]=(...t)=>e.saveReply&&e.saveReply(...t)),id:"submit-button",class:"mt-5 w-16 text-white p-2 rounded-lg shadow-lg transition transform hover:scale-105 flex float-right"},X),(0,a._)("button",{onClick:t[2]||(t[2]=(...t)=>e.CancelReply&&e.CancelReply(...t)),id:"submit-button",class:"mt-5 mr-3 w-16 text-white p-2 rounded-lg shadow-lg transition transform hover:scale-105 flex float-right"},te)])])])}var ae=(0,a.aZ)({components:{Avatar:v.Z},props:["replyUserId","initialContent"],setup(e,{emit:t}){const n=(0,a.FN)()?.appContext.config.globalProperties,o=(0,C.L)(),l=(0,b.j)(),s=(0,_.q)(),r=(0,x.yj)(),i=(0,h.qj)({commentContent:""}),m=(0,a.f3)("parentId"),c=(0,a.f3)("index"),p=()=>{if(""===o.userInfo)return void n.$notify({title:"Warning",message:"请登录后回复",type:"warning"});if(""==i.commentContent.trim())return void n.$notify({title:"Warning",message:"回复不能为空",type:"warning"});const a=r.path,c=a.split("/"),p={type:l.type,replyUserId:e.replyUserId,parentId:m,commentContent:i.commentContent};p.topicId=c[2],k.Z.saveComment(p).then((({data:e})=>{if(e.flag){t("changeShow"),u();let e=s.websiteConfig.isCommentReview;e?n.$notify({title:"Warning",message:"评论成功,正在审核中",type:"warning"}):n.$notify({title:"Success",message:"回复成功",type:"success"}),i.commentContent=""}else n.$notify({title:"Error",message:e.message,type:"error"})}))},u=async()=>{switch(l.type){case 1:Z.Z.emit("articleFetchReplies",c);break;case 2:Z.Z.emit("messageFetchReplies",c);break;case 3:Z.Z.emit("aboutFetchReplies",c);break;case 4:Z.Z.emit("friendLinkFetchReplies",c);break;case 5:Z.Z.emit("talkFetchReplies",c)}},d=()=>{t("changeShow")};return{...(0,h.BK)(i),avatar:(0,a.Fl)((()=>o.userInfo.avatar)),saveReply:p,CancelReply:d}}});const oe=(0,R.Z)(ae,[["render",ne],["__scopeId","data-v-592289ee"]]);var le=oe,se=(0,a.aZ)({components:{Avatar:v.Z,CommentReplyForm:le},props:["reply","commentUserId"],setup(e){const t=e=>{let t=new Date(e),n=t.getFullYear(),a=t.getMonth()+1,o=t.getDate();return n+"-"+a+"-"+o},n=(0,h.qj)({replyContent:"",time:t(e.reply.createTime),show:!1}),o=()=>{n.replyContent="@"+e.reply.nickname,n.show=!0},l=()=>{n.show=!1},s=(0,a.Fl)((()=>e.reply.replyUserId!==e.commentUserId?`<a href="${e.reply.replyWebsite}" target="_blank" class="reply-link">@${e.reply.replyNickname}&nbsp</a>`+e.reply.commentContent:e.reply.commentContent));return{...(0,h.BK)(n),commentContent:s,clickOnSonReply:o,changeShow:l}}});const re=(0,R.Z)(se,[["render",z],["__scopeId","data-v-b2a0afe8"]]);var ie=re,me=(0,a.aZ)({components:{Avatar:v.Z,CommentReplyItem:ie,CommentReplyForm:le},props:["comment","index"],setup(e){const t=e.comment;(0,a.JJ)("parentId",t.id),(0,a.JJ)("index",e.index);const n=e=>{let t=new Date(e),n=t.getFullYear(),a=t.getMonth()+1,o=t.getDate();return n+"-"+a+"-"+o},o=(0,h.qj)({replyContent:"",time:n(e.comment.createTime),show:!1}),l=()=>{o.show=!1},s=()=>{o.replyContent="add reply...",o.show=!0};return{...(0,h.BK)(o),clickOnReply:s,changeShow:l}}});const ce=(0,R.Z)(me,[["render",q],["__scopeId","data-v-5d986d37"]]);var pe=ce,ue=(0,a.aZ)({components:{CommentItem:pe},setup(){const e=(0,b.j)(),t=async()=>{switch(e.type){case 1:Z.Z.emit("articleLoadMore");break;case 2:Z.Z.emit("messageLoadMore");break;case 3:Z.Z.emit("aboutLoadMore");break;case 4:Z.Z.emit("friendLinkLoadMore");break;case 5:Z.Z.emit("talkLoadMore")}};return{comments:(0,a.f3)("comments"),haveMore:(0,a.f3)("haveMore"),loadMore:t}}});const de=(0,R.Z)(ue,[["render",S],["__scopeId","data-v-0547f9c6"]]);var ye=de,ge=(0,a.aZ)({name:"Comment",components:{SubTitle:s.D,CommentForm:D,CommentList:ye},setup(){return{}}});const fe=(0,R.Z)(ge,[["render",l]]);var we=fe},3830:function(e,t,n){n.d(t,{Z:function(){return d}});var a=n(3396);const o={class:"flex-shrink-0"},l={class:"rounded-full ring-gray-100 overflow-hidden shaodw-lg w-9 xl:w-10"},s=["src"],r=["src"];function i(e,t,n,i,m,c){return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",l,[null!=e.url?((0,a.wg)(),(0,a.iD)("img",{key:0,class:"avatar-img",src:e.url,alt:""},null,8,s)):((0,a.wg)(),(0,a.iD)("img",{key:1,class:"avatar-img",src:e.default,alt:""},null,8,r))])])}var m=n(4870),c=(0,a.aZ)({name:"Avatar",props:["url"],setup(e){return{url:(0,m.BK)(e).url,default:"https://static.wusuowei.online/img/%E5%A3%81%E7%BA%B81.jpg"}}}),p=n(89);const u=(0,p.Z)(c,[["render",i],["__scopeId","data-v-50a57112"]]);var d=u}}]);